<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SCHOOL-OVERRIDE</title>
<style>
body { margin:0; background:black; color:white; font-family:Arial,sans-serif; height:100vh; display:flex; flex-direction:column; }
.top-bar { display:flex; align-items:center; background:black; border-radius:40px; padding:12px 20px; margin:15px auto; max-width:900px; box-shadow:0 0 20px rgba(255,255,255,0.2); }
.top-left, .top-right { display:flex; gap:10px; }
.top-right { margin-left:auto; }
.top-bar button { background:none; border:none; color:white; padding:8px 16px; cursor:pointer; font-size:16px; border-radius:20px; transition:all 0.2s ease; }
.top-bar button:hover { color:red; background:#111; }
#content-frame { flex:1; width:100%; border:none; }
.overlay { display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.95); z-index:9999; justify-content:center; align-items:center; flex-direction:column; }
.overlay iframe { width:90%; height:90%; border:none; border-radius:10px; background:black; }
.overlay .close-overlay { position:absolute; top:20px; right:30px; font-size:30px; color:red; cursor:pointer; font-weight:bold; }
#games-modal { display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.95); z-index:9998; justify-content:center; align-items:center; }
#games-modal .games-box { background:black; border:2px solid white; border-radius:10px; width:600px; height:70vh; display:flex; flex-direction:column; overflow:hidden; }
.games-search { padding:10px; border-bottom:2px solid white; background:#111; }
.games-search input { width:100%; padding:8px; border:2px solid white; background:black; color:white; border-radius:6px; }
.games-list { flex:1; overflow-y:auto; padding:10px; display:flex; flex-direction:column; gap:8px; }
.games-list button { background:#222; border:2px solid #555; color:white; padding:10px; border-radius:6px; cursor:pointer; text-align:left; }
.games-list button:hover { background:white; color:black; }
#beta-label { position:fixed; bottom:5px; right:10px; font-size:12px; color:white; z-index:10000; font-family:monospace; }
</style>
</head>
<body>
<div class="top-bar">
  <div class="top-left">
    <button id="games-btn">Games</button>
    <button id="anime-btn">Anime</button>
  </div>
  <div class="top-right">
    <button id="ai-btn">AI</button>
    <button id="media-btn">Media Player</button>
  </div>
</div>
<iframe id="content-frame"></iframe>

<!-- AI Overlay -->
<div id="overlay-ai" class="overlay">
  <div class="close-overlay">✖</div>
  <div class="games-box" style="width:600px; height:60vh; padding:10px; display:flex; flex-direction:column; gap:10px; overflow-y:auto;">
    <input type="text" id="ai-search" placeholder="Search AI options..." style="padding:8px; border:2px solid white; border-radius:6px; background:black; color:white;">
    <div id="ai-list" style="display:flex; flex-direction:column; gap:10px;"></div>
  </div>
</div>

<!-- Media Player Overlay -->
<div id="overlay-media" class="overlay">
  <div class="close-overlay">✖</div>
  <iframe id="media-iframe"></iframe>
</div>

<!-- Anime Overlay -->
<div id="overlay-anime" class="overlay">
  <div class="close-overlay">✖</div>
  <iframe id="anime-iframe" src="https://allmanga.to"></iframe>
</div>

<!-- Game Overlay -->
<div id="overlay-game" class="overlay">
  <div class="close-overlay" id="close-game">✖</div>
  <iframe id="game-iframe"></iframe>
</div>

<!-- Games Panel -->
<div id="games-modal">
  <div class="games-box">
    <div class="games-search">
      <input type="text" id="game-search" placeholder="Search games...">
    </div>
    <div class="games-list" id="games-list"></div>
    <div class="close-overlay" id="close-games">✖</div>
  </div>
</div>

<div id="beta-label">V:1.1</div>

<script>
const homepageIframe = document.getElementById('content-frame');
fetch('https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/main/School%20Override/Parts/Proxy%20Broswers/Duckduckgo.html')
  .then(r => r.text())
  .then(html => homepageIframe.srcdoc = html);

function closeAllOverlays(){
  document.querySelectorAll('.overlay').forEach(o=>o.style.display='none');
}

function openOverlay(overlayId, iframeId=null, url=null){
  closeAllOverlays();
  const overlay = document.getElementById(overlayId);
  overlay.style.display='flex';
  if(iframeId && url){
    fetch(url).then(r=>r.text()).then(html=>document.getElementById(iframeId).srcdoc=html);
  }
  overlay.querySelector('.close-overlay').onclick = ()=>{
    overlay.style.display='none';
    if(iframeId) document.getElementById(iframeId).srcdoc='';
  };
}

// AI menu setup
const aiBtn = document.getElementById('ai-btn');
const aiSearch = document.getElementById('ai-search');
const aiList = document.getElementById('ai-list');
const aiOptions = [
  {name:'AI Bot', url:'https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/main/School%20Override/Parts/Ai/Ai%20bot.html'},
  {name:'C.ai.l', url:'https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/main/School%20Override/Parts/Ai/C.ai.l.html'},
  {name:'PolyBuzz', url:'https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/main/School%20Override/Parts/Ai/PolyBuzz.html'}
];

aiBtn.addEventListener('click', ()=>{
  aiList.innerHTML='';
  aiOptions.forEach(opt=>{
    const btn=document.createElement('button');
    btn.textContent=opt.name;
    btn.addEventListener('click',()=>{
      document.getElementById('overlay-ai').style.display='none';
      openOverlay('overlay-game','game-iframe',opt.url);
    });
    aiList.appendChild(btn);
  });
  document.getElementById('overlay-ai').style.display='flex';
});

document.getElementById('media-btn').addEventListener('click', ()=>openOverlay('overlay-media','media-iframe','https://raw.githubusercontent.com/NOTAHACKER9999/SCHOOL-OVERRIDE/main/School%20Override/Parts/Media%20Player.html'));
document.getElementById('anime-btn').addEventListener('click', ()=>openOverlay('overlay-anime'));

// Games Panel
const gamesBtn = document.getElementById('games-btn');
const gamesModal = document.getElementById('games-modal');
const closeGames = document.getElementById('close-games');
const gamesList = document.getElementById('games-list');
const gameSearch = document.getElementById('game-search');
const gameOverlay = document.getElementById('overlay-game');
const gameIframe = document.getElementById('game-iframe');

gamesBtn.addEventListener('click', ()=>{gamesModal.style.display='flex'; loadGames(gameSearch.value);});
closeGames.addEventListener('click', ()=>{gamesModal.style.display='none';});

gameSearch.addEventListener('input',(e)=>loadGames(e.target.value));

async function loadGames(filter=''){ 
  gamesList.innerHTML='<p>Loading games...</p>';
  try{
    const res = await fetch('https://override-games.th15isar0bothi.workers.dev/');
    const data = await res.json();
    const filtered = data.filter(g => g.name.toLowerCase().includes(filter.toLowerCase()));
    gamesList.innerHTML='';
    filtered.forEach(g => {
      const btn = document.createElement('button');
      btn.textContent = g.name;
      btn.addEventListener('click', async () => {
        gamesModal.style.display = 'none';
        closeAllOverlays();
        const html = await fetch(g.url).then(r => r.text());
        gameOverlay.style.display = 'flex';
        gameIframe.srcdoc = html;
      });
      gamesList.appendChild(btn);
    });
  }catch(err){
    console.error(err);
    gamesList.innerHTML='<p style="color:red">Failed to load games.</p>';
  }
}
</script>
</body>
</html>
